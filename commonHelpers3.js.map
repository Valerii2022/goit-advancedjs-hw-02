{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = { form: document.querySelector('.form') };\n\nrefs.form.addEventListener('submit', handleFormSubmit);\n\nfunction handleFormSubmit(e) {\n  e.preventDefault();\n  const formData = new FormData(e.currentTarget);\n  const data = {};\n  formData.forEach((value, key) => {\n    data[key] = value;\n  });\n  let delay = Number(data.delay);\n  const amount = Number(data.amount);\n  const step = Number(data.step);\n\n  createPromise(1, delay).then(onSuccess).catch(onError);\n\n  for (let i = 2; i <= amount; i += 1) {\n    delay += step;\n    createPromise(i, delay).then(onSuccess).catch(onError);\n  }\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.5;\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n}\n\nfunction onSuccess({ position, delay }) {\n  iziToast.success({\n    title: 'OK',\n    message: `Fulfilled promise ${position} in ${delay}ms`,\n    layout: 2,\n    position: 'topRight',\n    transitionIn: 'fadeInLeft',\n    transitionOut: 'fadeOutRight',\n  });\n}\n\nfunction onError({ position, delay }) {\n  iziToast.error({\n    title: 'Error',\n    message: `Rejected promise ${position} in ${delay}ms`,\n    layout: 2,\n    position: 'topRight',\n    transitionIn: 'fadeInLeft',\n    transitionOut: 'fadeOutRight',\n  });\n}\n"],"names":["refs","handleFormSubmit","e","formData","data","value","key","delay","amount","step","createPromise","onSuccess","onError","i","position","resolve","reject","shouldResolve","iziToast"],"mappings":"wIAGA,MAAMA,EAAO,CAAE,KAAM,SAAS,cAAc,OAAO,CAAC,EAEpDA,EAAK,KAAK,iBAAiB,SAAUC,CAAgB,EAErD,SAASA,EAAiBC,EAAG,CAC3BA,EAAE,eAAc,EAChB,MAAMC,EAAW,IAAI,SAASD,EAAE,aAAa,EACvCE,EAAO,CAAA,EACbD,EAAS,QAAQ,CAACE,EAAOC,IAAQ,CAC/BF,EAAKE,GAAOD,CAChB,CAAG,EACD,IAAIE,EAAQ,OAAOH,EAAK,KAAK,EAC7B,MAAMI,EAAS,OAAOJ,EAAK,MAAM,EAC3BK,EAAO,OAAOL,EAAK,IAAI,EAE7BM,EAAc,EAAGH,CAAK,EAAE,KAAKI,CAAS,EAAE,MAAMC,CAAO,EAErD,QAASC,EAAI,EAAGA,GAAKL,EAAQK,GAAK,EAChCN,GAASE,EACTC,EAAcG,EAAGN,CAAK,EAAE,KAAKI,CAAS,EAAE,MAAMC,CAAO,CAEzD,CAEA,SAASF,EAAcI,EAAUP,EAAO,CACtC,OAAO,IAAI,QAAQ,CAACQ,EAASC,IAAW,CACtC,MAAMC,EAAgB,KAAK,OAAM,EAAK,GACtC,WAAW,IAAM,CACXA,EACFF,EAAQ,CAAE,SAAAD,EAAU,MAAAP,CAAK,CAAE,EAE3BS,EAAO,CAAE,SAAAF,EAAU,MAAAP,CAAK,CAAE,CAE7B,EAAEA,CAAK,CACZ,CAAG,CACH,CAEA,SAASI,EAAU,CAAE,SAAAG,EAAU,MAAAP,GAAS,CACtCW,EAAS,QAAQ,CACf,MAAO,KACP,QAAS,qBAAqBJ,QAAeP,MAC7C,OAAQ,EACR,SAAU,WACV,aAAc,aACd,cAAe,cACnB,CAAG,CACH,CAEA,SAASK,EAAQ,CAAE,SAAAE,EAAU,MAAAP,GAAS,CACpCW,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oBAAoBJ,QAAeP,MAC5C,OAAQ,EACR,SAAU,WACV,aAAc,aACd,cAAe,cACnB,CAAG,CACH"}